# CoreSky自动任务脚本使用说明

## 📋 功能介绍

CoreSky自动任务脚本是一个支持多账户批量操作的自动化工具，主要功能包括：

- 🔐 **自动登录**：使用私钥进行Web3钱包签名登录
- ✅ **自动签到**：完成每日签到任务（包含验证码识别）
- 🗳️ **自动投票**：使用账户积分进行投票任务
- 🌐 **代理支持**：支持HTTP/SOCKS5代理，避免IP限制
- 📊 **批量处理**：支持多账户轮流执行任务

## 🛠️ 环境要求

### Python版本
- Python 3.7 或更高版本

### 依赖库
脚本会自动检测以下依赖库，如缺少会提示安装：

```bash
pip install opencv-python numpy eth-account pycryptodome requests
```

### 系统要求
- macOS / Windows / Linux
- 网络连接稳定

## 📁 文件结构

```
/Users/mac/Desktop/未命名文件夹/coresky签到脚本/
├── check.py          # 主程序脚本
├── pk.txt           # 私钥配置文件（必需）
├── ip.txt           # 代理配置文件（可选）
└── debug_images/    # 验证码调试图片目录（自动创建）
```

## 📝 配置文件

### 1. 私钥文件 (pk.txt)

**文件路径：** `/Users/mac/Desktop/未命名文件夹/coresky签到脚本/pk.txt`

**格式说明：**
- 每行一个私钥
- 支持带0x前缀或不带前缀
- 支持注释行（以#开头）
- 支持空行

**示例内容：**
```
# CoreSky私钥配置文件
# 第一个账户的私钥
0xdb728a7dc0a45b580adc5f4efc0e6b3853e820aaaaaa0cdf5aa2d35108d73ca5

# 第二个账户的私钥（不带0x前缀也可以）
abc123def456789012345678901234567890123456789012345678901234567890

# 第三个账户
0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef

# 注释：更多私钥可以继续添加...
```

### 2. 代理文件 (ip.txt) - 可选

**文件路径：** `/Users/mac/Desktop/未命名文件夹/coresky签到脚本/ip.txt`

**格式说明：**
- 格式：`IP地址:端口:用户名:密码:协议`
- 支持HTTP和SOCKS5协议
- 支持注释行（以#开头）
- 如果代理数量少于私钥数量，多余的账户将使用直连

**示例内容：**
```
# CoreSky代理配置文件
# 格式：IP:端口:用户名:密码:协议

# HTTP代理示例
85.209.177.145:50101:nolanwang:HFVsyegfeyigrfkjb:http

# SOCKS5代理示例
192.168.1.100:1080:username:password:socks5

# 更多代理
203.0.113.1:3128:user1:pass1:http
198.51.100.1:1080:user2:pass2:socks5

# 注释：一个账户对应一个代理，按顺序匹配
```

## ⚙️ 任务模式配置

在脚本中找到以下配置，根据需要修改：

```python
# ========== 任务配置 ==========
self.TASK_MODE = "both"  # 修改这里
# ============================
```

**可选模式：**
- `"sign_only"` - 只执行签到任务
- `"vote_only"` - 只执行投票任务  
- `"both"` - 执行签到和投票任务（推荐）

## 🚀 使用步骤

### 第一步：准备文件

1. 确保脚本文件 `check.py` 已保存
2. 在指定目录创建 `pk.txt` 文件，添加私钥
3. （可选）创建 `ip.txt` 文件，添加代理信息

### 第二步：安装依赖

在终端执行：
```bash
pip install opencv-python numpy eth-account pycryptodome requests
```

### 第三步：运行脚本

在终端中执行：
```bash
python check.py
```

或者：
```bash
python3 check.py
```

## 📊 运行日志说明

### 启动阶段
```
🚀 CoreSky自动任务脚本启动...
✅ 所有依赖库检查通过
🔍 从pk.txt加载私钥...
✅ 私钥 1: db728a7dc0...
✅ 总共加载 3 个有效私钥
🔍 从ip.txt加载代理...
✅ 代理 1: http://85.209.177.145:50101
✅ 总共加载 2 个代理
🎯 任务模式: both
```

### 任务执行阶段
```
==================================================
📋 处理账户 1/3
🔗 使用代理: 85.209.177.145:****
✅ 登录成功: 0x742d35c7...
🎯 开始签到任务...
✅ 获取验证码成功
🎯 检测位置: x=156, y=5, 置信度=0.847
✅ 验证码验证成功
🎉 签到成功！
✅ 签到任务完成！
🎯 开始投票任务...
💰 当前积分: 150
🗳️ 投票成功！投票数量: 150
✅ 投票任务完成！
🎉 所有任务完成成功！
```

### 完成阶段
```
============================================================
🎉 任务执行完成! 成功: 2/3
```

## ⚠️ 注意事项

### 安全提醒
- **私钥安全**：私钥文件包含敏感信息，请妥善保管，不要分享给他人
- **定期备份**：建议定期备份私钥文件
- **权限设置**：建议设置私钥文件仅当前用户可读

### 使用建议
- **代理质量**：使用高质量的代理IP，避免被限制
- **执行时间**：建议在网络较好的时间段运行
- **账户间隔**：脚本已设置30-60秒的账户间隔，避免频率限制
- **失败重试**：如果失败，可以稍后重新运行脚本

### 故障排除
- **依赖库错误**：按提示安装缺少的库
- **文件路径错误**：确认文件路径正确
- **私钥格式错误**：确保私钥为64位十六进制字符串
- **代理连接失败**：检查代理配置或使用直连模式
- **验证码识别失败**：查看debug_images目录中的图片，调整检测算法

## 🔧 高级配置

### 自定义等待时间
在代码中可以调整等待时间：
```python
# 账户间等待时间（秒）
wait_time = random.uniform(30, 60)  # 可调整为其他范围

# 请求间隔时间（秒）
self.wait_between_requests(min_wait=5, max_wait=15)  # 可调整范围
```

### 验证码调试
脚本会在 `debug_images/` 目录保存验证码图片，用于调试：
- `original_时间戳.png` - 原始验证码图片
- `jigsaw_时间戳.png` - 滑块图片  
- `result_时间戳.png` - 检测结果图片

## 📞 技术支持

如果遇到问题，请检查：

1. **文件路径**是否正确
2. **私钥格式**是否符合要求
3. **网络连接**是否稳定
4. **依赖库**是否安装完整
5. **代理配置**是否正确

## 📄 更新日志

### v1.0
- 支持多账户批量签到和投票
- 支持HTTP/SOCKS5代理
- 自动验证码识别
- 文件配置管理
- 详细日志输出
